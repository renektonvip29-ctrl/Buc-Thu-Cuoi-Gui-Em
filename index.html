<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Thư Gửi Bạn</title>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Patrick+Hand&display=swap" rel="stylesheet">
    <style>
        /* --- CẤU HÌNH MÀU SẮC & KÍCH THƯỚC --- */
        :root {
            --bg-color: #eef2f7;    /* Màu nền trang web sáng sủa, hiện đại */
            --envelope-main: #d4c4a8; /* Màu chính của bao thư (nâu giấy kraft nhạt) */
            --envelope-shadow: #c0b093; /* Màu tối hơn để tạo khối */
            --paper-color: #fffcf5; /* Màu giấy viết thư kem */
            --line-color: #a2a9b6;  /* Màu dòng kẻ xanh nhạt */
            --line-height: 32px;    /* CHIỀU CAO DÒNG KẺ CHUẨN */
        }

        body {
            background-color: var(--bg-color);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            font-family: 'Patrick Hand', cursive; /* Font chữ viết tay chính */
            overflow: hidden; /* Ngăn cuộn trang bên ngoài */
        }

        /* Lớp phủ mờ nền đen khi mở thư */
        .overlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.5); /* Màu đen mờ nhẹ hơn */
            opacity: 0;
            visibility: hidden;
            transition: all 0.6s ease-in-out;
            z-index: 90;
            backdrop-filter: blur(3px); /* Làm mờ hậu cảnh */
        }
        
        body.message-open .overlay { opacity: 1; visibility: visible; }

        /* --- KHUNG BAO THƯ --- */
        .wrapper {
            position: relative;
            width: 320px;
            height: 220px;
            cursor: pointer;
            z-index: 100;
            /* Hiệu ứng nổi nhẹ khi di chuột vào */
            transition: transform 0.3s ease;
        }
        .wrapper:hover { transform: translateY(-5px); }

        /* --- CẤU TẠO BAO THƯ (Tối giản & Tinh tế) --- */
        .envelope {
            position: absolute; bottom: 0; left: 0; width: 100%; height: 100%;
            background-color: var(--envelope-main);
            border-radius: 8px;
            /* Đổ bóng mềm mại hơn, tạo độ sâu */
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            z-index: 2;
        }

        /* Tam giác đáy (Phần thân chính) */
        .envelope::before {
            content: ''; position: absolute; bottom: 0; left: 0;
            border-style: solid; border-width: 0 160px 130px 160px;
            border-color: transparent transparent var(--envelope-main) transparent;
            z-index: 4;
            filter: drop-shadow(0 -2px 3px rgba(0,0,0,0.05)); /* Bóng nhẹ ngăn cách các lớp */
        }

        /* Hai cánh bên (Tạo khối) */
        .envelope::after {
            content: ''; position: absolute; top: 0; left: 0;
            border-style: solid; border-width: 110px 160px 110px 160px;
            /* Dùng màu tối hơn chút để tạo hiệu ứng lớp xếp chồng */
            border-color: transparent var(--envelope-shadow) transparent var(--envelope-shadow);
            z-index: 3;
        }

        /* Nắp thư (Flap) */
        .flap {
            position: absolute; top: 0; left: 0;
            border-style: solid; border-width: 120px 160px 0 160px;
            border-color: var(--envelope-main) transparent transparent transparent;
            z-index: 5;
            transform-origin: top;
            /* Chuyển động mở nắp mượt mà */
            transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1), z-index 0.6s;
            /* Bóng đổ của nắp thư lên thân thư */
            filter: drop-shadow(0 5px 10px rgba(0,0,0,0.15));
        }

        /* --- TỜ GIẤY & DÒNG KẺ (Trọng tâm) --- */
        .letter {
            position: absolute;
            top: 50%; left: 50%;
            /* Ban đầu nhỏ, ẩn, và hơi xoay nhẹ */
            transform: translate(-50%, -50%) scale(0.5) rotate(-5deg);
            width: 85%; height: 85%;
            
            /* Tạo nền giấy có dòng kẻ bằng CSS Gradient */
            background-color: var(--paper-color);
            background-image: repeating-linear-gradient(
                var(--paper-color),
                var(--paper-color) calc(var(--line-height) - 1px),
                var(--line-color) calc(var(--line-height) - 1px),
                var(--line-color) var(--line-height)
            );
            
            border-radius: 4px;
            opacity: 0;
            z-index: 1;
            /* Hiệu ứng chuyển động bay ra mượt mà, chậm rãi (0.8s) */
            transition: all 0.8s cubic-bezier(0.34, 1.2, 0.64, 1); 
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            overflow: hidden;
            display: flex; 
            flex-direction: column;
            border: 1px solid #e0e0e0;
        }

        /* Nội dung bên trong giấy */
        .paper-content {
            width: 100%;
            height: 100%;
            padding: 0 25px; /* Lề 2 bên rộng hơn chút cho thoáng */
            box-sizing: border-box;
            overflow-y: auto; /* Cho phép cuộn */
            /* Ẩn thanh cuộn nhưng vẫn cuộn được (cho đẹp) */
            scrollbar-width: none; 
        }
        .paper-content::-webkit-scrollbar { display: none; }

        /* Tiêu đề thư (Font bay bổng) */
        .paper-content h1 {
            font-family: 'Dancing Script', cursive;
            color: #8d6e63; /* Màu nâu tây sang trọng */
            font-size: 34px;
            margin: 0;
            /* Chiếm đúng 2 dòng kẻ */
            height: calc(var(--line-height) * 2); 
            line-height: calc(var(--line-height) * 2);
            text-align: center;
            font-weight: 700;
        }

        /* Đoạn văn bản chính (CĂN DÒNG CHUẨN) */
        .paper-content p {
            font-size: 21px; /* Kích thước chữ tối ưu cho dòng 32px */
            color: #555;
            margin: 0;
            /* Line-height bằng đúng kích thước dòng kẻ nền */
            line-height: var(--line-height); 
            text-align: justify;
        }
        
        /* --- TRẠNG THÁI KHI MỞ THƯ --- */
        
        /* 1. Mở nắp */
        .wrapper.open .flap {
            transform: rotateX(180deg);
            z-index: 1; /* Đưa nắp xuống dưới giấy */
        }

        /* 2. Giấy bay ra và phóng to */
        .wrapper.open .letter {
            position: fixed; /* Chuyển sang cố định màn hình */
            top: 50%; left: 50%;
            /* Về vị trí chính giữa, không xoay nữa, kích thước chuẩn */
            transform: translate(-50%, -50%) scale(1) rotate(0deg);
            
            /* Kích thước khi mở ra */
            width: 90vw; 
            max-width: 550px; /* Rộng hơn chút trên PC */
            height: 80vh;
            
            z-index: 1000;
            opacity: 1;
            /* Bóng đổ lớn tạo cảm giác nổi hẳn lên trên nền tối */
            box-shadow: 0 30px 60px rgba(0,0,0,0.4);
            
            /* Lề trên để bắt đầu đúng dòng kẻ */
            padding-top: var(--line-height); 
        }

        /* Nút đóng thư */
        .close-btn {
            display: block;
            margin: calc(var(--line-height) * 1.5) auto; /* Cách trên dưới 1.5 dòng */
            padding: 8px 30px;
            background-color: #8d6e63;
            color: white;
            border: none;
            border-radius: 50px; /* Nút tròn mềm mại */
            font-family: 'Patrick Hand', cursive;
            font-size: 18px;
            cursor: pointer;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            opacity: 0;
            /* Hiện nút chậm hơn giấy một chút */
            transition: opacity 0.5s 0.6s, transform 0.2s, background-color 0.3s;
        }
        
        .close-btn:hover {
            background-color: #6d4c41;
            transform: scale(1.05); /* Phóng to nhẹ khi di chuột */
        }
        
        .wrapper.open .close-btn { opacity: 1; }

    </style>
</head>
<body>

    <div class="overlay" onclick="closeLetter(event)"></div>

    <div class="wrapper" id="envelopeWrapper" onclick="openLetter()">
        <div class="envelope"></div>
        <div class="flap"></div>

        <div class="letter">
            <div class="paper-content">
                <h1>Thư Gửi Người Thương</h1>
                
                <p>
                    Chào bạn, một ngày thật bình yên nhé!<br>
                    Tôi viết những dòng này khi ngoài kia nắng đang lên rất đẹp. Không có hoa lá cầu kỳ, chỉ có tấm chân tình gửi gắm trên trang giấy mộc mạc này.<br>
                    Mong rằng dù cuộc sống có bộn bề đến đâu, bạn vẫn luôn giữ được sự an yên trong tâm hồn và nụ cười trên môi.<br>
                    Hãy nhớ rằng, bạn luôn xứng đáng với những điều tốt đẹp nhất.<br>
                    <br>
                    Thân mến,<br>
                    Người bạn phương xa.
                </p>

                <button class="close-btn" onclick="closeLetter(event)">Đóng Thư Lại</button>
            </div>
        </div>
    </div>

    <script>
        // Giữ nguyên logic Javascript vì đã hoạt động tốt
        function openLetter() {
            const wrapper = document.getElementById('envelopeWrapper');
            const body = document.body;
            wrapper.classList.add('open');
            body.classList.add('message-open');
        }

        function closeLetter(event) {
            event.stopPropagation();
            const wrapper = document.getElementById('envelopeWrapper');
            const body = document.body;
            wrapper.classList.remove('open');
            body.classList.remove('message-open');
        }
    </script>

</body>
</html>
